services:
  payproapi.registration_subscriber:
    class: UserBundle\EventSubscriber\RegistrationSubscriber
    arguments: 
      - "@payproapi.user_validator_service"
      - "@payproapi.create_bitcoin_account_service"
      - "@=service('doctrine.orm.entity_manager').getRepository('AppBundle:BitcoinAccount')"
      - "@bitcoin_wallet_api_client.wallet_service"
    tags:
      - { name: kernel.event_subscriber }

  payproapi.kernel_request_subscriber:
    class: AppBundle\EventSubscriber\KernelRequestSubscriber
    tags:
      - { name: kernel.event_subscriber }

  payproapi.mobile_verification_code_subscriber:
    class: AppBundle\EventSubscriber\MobileVerificationCodeSubscriber
    arguments:
      - '@payproapi.twilio_short_message_service'
    tags:
      - { name: kernel.event_subscriber }

  payproapi.authentication_subscriber:
    class: AppBundle\EventSubscriber\AuthenticationSubscriber
    tags:
      - { name: kernel.event_subscriber }
